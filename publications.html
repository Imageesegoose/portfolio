<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Publications</title>
  <meta name="description" content="Publications photography gallery showcasing published works and editorial photography." />
  <!-- Google Font: Major Mono Display (loaded before CSS) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Major+Mono+Display&display=swap" rel="stylesheet" crossorigin="anonymous">
  <!-- site CSS -->
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="wrap header-inner">
      <a class="brand" href="index.html">
        <img src="assets/images/logo.svg" alt="Logo" class="logo">
        <span class="site-title"></span>
      </a>
      <button class="mobile-menu-btn" aria-label="Toggle menu" id="mobile-menu-btn">
        <span>☰</span>
      </button>
      <nav class="site-nav" id="site-nav">
        <a href="index.html#home">Home</a>
        <div class="dropdown">
          <a href="#">Work</a>
          <div class="dropdown-content">
            <a href="adventure.html">Adventure</a>
            <a href="faces.html">Faces</a>
            <a href="portraits.html">Portraits</a>
            <a href="higher-education.html">Higher Education</a>
            <a href="publications.html">Publications</a>
          </div>
        </div>
        <a href="about.html">About</a>
        <a href="index.html#contact">Contact</a>
      </nav>
    </div>
    <div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>
  </header>

  <main>
    <section class="hero wrap">
      <h2>Publications Gallery</h2>
      <p class="lead">A collection of published works and editorial photography.</p>
    </section>

    <section class="wrap">
      <div class="adventure-gallery" id="adventure-gallery" aria-label="Gallery of publication images">
        <!-- Images will be dynamically loaded here -->
      </div>
    </section>
  </main>

  <footer class="site-footer wrap">
    <div class="footer-toggle">
      <label for="dark-mode-toggle">
        <input type="checkbox" id="dark-mode-toggle" /> Enable Dark Mode
      </label>
    </div>
    <small>© <span id="year"></span> Your Name</small>
  </footer>

  <script src="assets/js/main.js"></script>
  <script>
    (function() {
      'use strict';
      
      const galleryContainer = document.getElementById('adventure-gallery');
      
      // Build list of publications image paths with proper extensions
      const imageExtensions = [
        { num: 1, ext: 'jpg' },
        { num: 2, ext: 'jpg' }
      ];
      
      // Create inline lightbox for dynamically loaded images
      function createAdventureLightbox() {
        if (window.__adventure_lightbox) return window.__adventure_lightbox;
        
        const lb = document.createElement('div');
        lb.id = 'adventure-lightbox';
        lb.style.cssText = 'position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.85);z-index:9999;padding:24px;';
        lb.innerHTML = '<button id="alb-close" aria-label="Close" style="position:absolute;right:18px;top:18px;font-size:36px;color:#fff;background:none;border:0;cursor:pointer;padding:12px;">×</button><img id="alb-img" style="max-width:90%;max-height:80%;object-fit:contain;border-radius:4px;box-shadow:0 8px 30px rgba(0,0,0,0.6);"><div id="alb-caption" style="color:#eee;margin-top:12px;text-align:center;"></div>';
        document.body.appendChild(lb);
        
        const img = lb.querySelector('#alb-img');
        const caption = lb.querySelector('#alb-caption');
        const closeBtn = lb.querySelector('#alb-close');
        
        function open(src, text) {
          img.src = src;
          caption.textContent = text || '';
          lb.style.display = 'flex';
          document.body.style.overflow = 'hidden';
        }
        
        function close() {
          lb.style.display = 'none';
          img.src = '';
          document.body.style.overflow = '';
        }
        
        closeBtn.addEventListener('click', close);
        lb.addEventListener('click', function(e) {
          if (e.target === lb || e.target === closeBtn) close();
        });
        
        // Close on Escape key
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && lb.style.display === 'flex') close();
        });
        
        window.__adventure_lightbox = { open: open, close: close };
        return window.__adventure_lightbox;
      }
      
      const lightbox = createAdventureLightbox();
      
      // Create gallery items
      imageExtensions.forEach(function(imgInfo) {
        const numStr = String(imgInfo.num).padStart(5, '0');
        const imgPath = 'assets/images/publications/pubs-' + numStr + '.' + imgInfo.ext;
        
        const anchor = document.createElement('a');
        anchor.href = imgPath;
        anchor.className = 'gallery-item loading';
        anchor.setAttribute('data-caption', 'Publications ' + imgInfo.num);
        
        const img = document.createElement('img');
        img.src = imgPath;
        img.alt = 'Publications ' + imgInfo.num;
        img.loading = 'lazy';
        
        // Handle successful image load
        img.addEventListener('load', function() {
          anchor.classList.remove('loading');
        });
        
        // Handle image load errors with fallback
        img.addEventListener('error', function() {
          anchor.classList.add('error');
          console.warn('Failed to load image:', imgPath);
        });
        
        // Attach lightbox click handler
        anchor.addEventListener('click', function(e) {
          e.preventDefault();
          const href = anchor.getAttribute('href');
          const cap = anchor.getAttribute('data-caption') || '';
          lightbox.open(href, cap);
        });
        
        anchor.appendChild(img);
        galleryContainer.appendChild(anchor);
      });
    })();
  </script>
</body>
</html>
